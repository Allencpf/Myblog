---
title: ggplot2概述
author: Trevor
date: '2021-04-12'
slug: ggplot2
categories: []
tags:
  - R
editor_options: 
  chunk_output_type: console
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>


<div id="ggplot2基本逻辑" class="section level2">
<h2>1.ggplot2基本逻辑</h2>
<p>ggplot2 的作图一般步骤为:</p>
<ul>
<li>准备数据，一般为数据框，且一般为长表，即每个观测时间占一行，每个观测变量占一列。</li>
<li>将数据输入到 ggplot() 函数中，并指定参与作图的每个变量分别映射到哪些图形特性，比如映射为 x 坐标、
y 坐标、颜色、形状等。这些映射称为 aesthetic mappings。</li>
<li>选择一个合适的图形类型，函数名以 geom_ 开头，如 geom_point() 表示散点图,geom_bar()为柱状图。图形类型简称为 geom。
将 ggplot() 部分与 geom_xxx() 部分用+连接。到此已经可以作图，下面的步骤是进一步的细化设定。</li>
<li>设定适当的坐标系统，如将纵坐标设为百分比显示等。仍用+连接。</li>
<li>设定标题和图例位置等，如 labs()。仍用+连接。</li>
</ul>
</div>
<div id="基本流程" class="section level2">
<h2>2.基本流程</h2>
<pre class="r"><code>## 准备数据，一般为dataframe格式，且为长表，每个观测变量占一列
library(tidyverse)
dfdemo &lt;- read_csv(&quot;/Users/cpf/Documents/paper/R_programming/Rprocess/mydata/dfdemo.csv&quot;)
data(&quot;TravelMode&quot;, package = &quot;AER&quot;)
head(dfdemo)</code></pre>
<pre><code>## # A tibble: 6 x 8
##        CASENUM WEATHHER  VENO   AGE  AGE1   SEX REST_USE INJ_SEV
##          &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;
## 1 201700316865        0     1    49     2     1        1       0
## 2 201700316865        0     2    16     0     1        1       0
## 3 201600777740        0     1    18     0     1        1       1
## 4 201600777740        0     2    38     1     0        1       1
## 5 201801320571        2     1    71     3     1        1       0
## 6 201801320571        2     2    64     3     1        1       2</code></pre>
<pre class="r"><code>ggplot(data = dfdemo)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre class="r"><code>## 构建映射，将所期望的列变量名映射到x，y上
ggplot(data = dfdemo, mapping = aes(x = AGE, y = INJ_SEV, color = VENO))</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-1-2.png" width="672" /></p>
<pre class="r"><code>## 在该映射下绘制散点图
ggplot(data = dfdemo, mapping = aes(x = AGE, y = INJ_SEV, color = VENO)) +
  geom_point(color = &quot;red&quot;) + 
  geom_smooth()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-1-3.png" width="672" /></p>
</div>
